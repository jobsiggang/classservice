version: 2
services:
  - type: web
    name: auth-service
    runtime: docker
    dockerfilePath: ./Dockerfile.auth
    envVars:
      - key: PORT
        value: 3001
      - key: MONGODB_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: JWT_REFRESH_SECRET
        sync: false
      - key: NODE_ENV
        value: production
    
  - type: web
    name: user-service
    runtime: docker
    dockerfilePath: ./Dockerfile.user
    envVars:
      - key: PORT
        value: 3002
      - key: MONGODB_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: NODE_ENV
        value: production
    
  - type: web
    name: assignment-service
    runtime: docker
    dockerfilePath: ./Dockerfile.assignment
    envVars:
      - key: PORT
        value: 3003
      - key: MONGODB_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: NODE_ENV
        value: production
    
  - type: web
    name: file-service
    runtime: docker
    dockerfilePath: ./Dockerfile.file
    envVars:
      - key: PORT
        value: 3004
      - key: MONGODB_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: AWS_ACCESS_KEY_ID
        sync: false
      - key: AWS_SECRET_ACCESS_KEY
        sync: false
      - key: AWS_REGION
        value: ap-northeast-2
      - key: AWS_S3_BUCKET
        sync: false
      - key: NODE_ENV
        value: production
    
  - type: web
    name: realtime-service
    runtime: docker
    dockerfilePath: ./Dockerfile.realtime
    envVars:
      - key: PORT
        value: 3005
      - key: MONGODB_URI
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: NODE_ENV
        value: production
